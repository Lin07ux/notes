### 1. 调用规约

Go 的函数调用规约在 1.17 版本发生了变化：

* Go 1.17 之前的函数调用，参数和返回值都在栈上传递，这是为了简化在不同架构的计算机上的处理；
* Go 1.17 之后，9 个以内的参数在寄存器传递，9 个以外的在栈上传递；9 个以内的返回值通过寄存器传递，9 个以外的在栈上传递。

切换到基于寄存器的调用惯例后，Go 程序的运行性能提高了约 5%，二进制文件大小减少了约 2%。

CPU 访问寄存器的速度要远高于栈内存，参数在栈上传递会增加栈的内存空间，并且影响栈的扩缩容和垃圾回收。使用寄存器传递参数和返回值，能使这些缺点得到优化。


### 2. 操作系统线程和 goroutine 有什么区别？

* goroutine 运行在用户态，更轻量级，被休眠和唤醒的成本比较低，而操作系统线程同时存在用户态和内核态，在休眠和唤醒时涉及到内核态的切换，成本较高；
* goroutine 数量没有限制，即便数量很多也没有太大影响（除了内存占用），但操作系统线程数量较多时，会对操作系统的调度机制产生较大影响。


