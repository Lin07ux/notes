箭头函数是最有价值的新功能之一，它具有上下文透明性和简短的语法，能够方便开发。但也正是有它改变了普通函数`this`指向的动态性，使其在一些特定场合中并不适合使用。

### 1. 定义对象上的方法

在 JavaScript 中，方法是存储在对象属性中的函数。当调用该方法时，`this`将指向该方法所属的对象。但是如果使用箭头函数定义的话，则该方法中的`this`总是指向定义时的上下文：

```JavaScript
const calculate = {
  array: [1, 2, 3],
  sum1: () => {
    console.log(this === window); // => true
    return this.array.reduce((result, item) => result + item);
  },
  sum2 () {
    console.log(this === calculate); // => true
    return this.array.reduce((result, item) => result + item);
  }
};

console.log(this === window); // => true
calculate.sum1(); // => Throws "TypeError: Cannot read property 'reduce' of undefined"
calculate.sum2(); // => 6
```

同样的规则也适用于在原型对象上定义方法。在对象上使用箭头函数来定义`sayCatName`方法，其`this`也会指向 window：

```JavaScript
function MyCat(name) {
  this.catName = name;
}

MyCat.prototype.sayCatName = () => {
  console.log(this === window); // => true
  return this.catName;
};

const cat = new MyCat('Mew');
cat.sayCatName(); // => undefined
```

### 2. 动态上下文的回调函数

由于箭头函数会在声明上静态绑定上下文，并且无法使其动态化，这在上下文经常变化的情况(如 DOM 事件监听器)会造成问题。

下面的示例尝试为 DOM 元素的点击事件的处理程序使用箭头函数：

```JavaScript
const button = document.getElementById('myButton');
button.addEventListener('click', () => {
  console.log(this === window); // => true
  this.innerHTML = 'Clicked button';
});
```

定义该事件监听器的时候，全局上下文中`this`指向 window。 当发生单击事件时，浏览器尝试使用按钮上下文调用处理函数，但箭头函数不会更改其预定义的上下文。`this.innerHTML`相当于`window.innerHTML`，没有任何意义。

这时候就应该使用一般函数来设置事件监听器，从而允许根据目标元素更改`this`：

```JavaScript
const button = document.getElementById('myButton');
button.addEventListener('click', function() {
  console.log(this === button); // => true
  this.innerHTML = 'Clicked button';
});
```

### 3.调用构造函数

`this`在构造调用中是新创建的对象。当执行`new MyFunction()`时，构造函数`MyFunction`的上下文是一个新对象：

```JavaScript
this instanceof MyFunction === true
```

箭头函数不能用作构造函数，JavaScript 会通过抛出异常来隐式阻止这样做。由于箭头函数中`this`是来自封闭上下文的设置，而不是新创建的对象，所以箭头函数构造函数调用没有意义，而且是模糊的。

如果尝试这样做：

```JavaScript
const Message = (text) => {
  this.text = text;
};

// Throws "TypeError: Message is not a constructor"
const helloMessage = new Message('Hello World!');
```

可以看到视图实例化一个箭头函数会触发异常。

