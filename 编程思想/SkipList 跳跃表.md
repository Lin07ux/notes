> 转摘：[有关跳跃表的干货都在这里](https://mp.weixin.qq.com/s/wcOORygaCKF-AlJ1d5O2Uw)

## 一、基础

跳跃表，简称跳表。跳跃表是一个随机化的数据结构，实质就是一种可以进行二分查找的有序链表。跳跃表在原有的有序链表上面增加了多级索引，通过索引来实现快速查找。跳跃表不仅能提高搜索性能，同时也可以提高插入和删除操作的性能。

跳跃表有如下性质：

1.	由很多层结构组成；
2.	每一层都是一个有序的链表；
3.	最底层(Level 1)的链表包含所有元素；
4.	如果一个元素出现在 Level i 的链表中，则它在 Level i 之下的链表也都会出现；
5.	每个节点包含两个指针，一个指向同一链表中的下一个元素，一个指向下面一层的元素。

一个简单的跳跃表示意图如下：

![](http://cnd.qiniu.lin07ux.cn/markdown/1562820198764.png)

> 其中 -1 表示`INT_MIN`，链表的最小值，1 表示`INT_MAX`，链表的最大值。

## 二、操作

### 2.1 get 操作

在跳跃表中查找元素是链接查找和二叉树查找的混合形态，如下图所示，查找元素 117：

![](http://cnd.qiniu.lin07ux.cn/markdown/1562820352264.png)

具体步骤如下：

1.	在顶层链表中比较 21：比 21 大，往后面找；
2.	在顶层链表中比较 37：比 37 大，而且该层链表 37 是最大的，则转移到下一层链表；
3.	在第二层链表中比较 71：比 71 大，而且该层链表 71 是最大的，则转移到下一层链表；
4.	在第三层链表中比较 85：比 85 大，继续往后面找；
5.	在第三层链表中比较 117：等于 117，找到了节点。

### 2.2 insert 操作

跳跃表的插入操作需要先确定要将元素插入的层级 K，然后再将元素依次插入到该层及位于该层之下的链表的相应位置中。如果 K 大于链表的层数，则要添加新的层。

确定插入的层级是采用丢硬币的方式，这完全是随机的，也就是随机得到要插入的层级：

```java
public int random_level() {
    int k = 1;
    
    while (Math.random() <= 0.5f) {
        k++;
    }
    
    return k;
}
```

> 相当于做一次丢硬币的实验，如果遇到正面，继续丢，遇到反面，则停止。

比如，在前面的跳跃表示例中插入 199 元素，如果随机得到的层级 K = 2，则插入过程如下：

![](http://cnd.qiniu.lin07ux.cn/markdown/1562821021976.png)

而如果得到的层级 K = 4，则插入过程如下：

![](http://cnd.qiniu.lin07ux.cn/markdown/1562821046991.png)

### 2.3 delete 操作

从跳跃表中删除元素，首先需要从各层链表中找到该元素，然后从链表中依次删除即可。

例如，从上面链表中删除 71，过程类似如下：

![](http://cnd.qiniu.lin07ux.cn/markdown/1562821177314.png)


