> 转摘：[补数到底是个什么玩意儿？从根儿上理解一下](https://mp.weixin.qq.com/s/osV5nSWMXLzF4LRjDGsHbw)

## 一、十二进制中的补数

钟表上一般有十二个数值，从 1 到 12，表示 1 ~ 12 个刻度。可以认为时钟是以十二进制来进行计数的，只是考虑到大部分用户的感受，所以表盘时钟刻度旁的数字是十进制形式的。比如下边的钟表显示的时间就是 6 点整：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572686136373.png)

如果要将其改成十二进制的数字，则需要使用字母对其中的部分数字进行替换。比如，使用 `0 ~ 9`、`a`、`b`这十二个符号来表示十二进制中的数值。其中`0 ~ 9`的字面量和十进制中的相同，使用`a`代表十进制中的`10`，`b`代表十进制中的`11`。另外，从 0 开始计数，所以要将钟表中的`12`改为`0`，然后钟表就变成了如下的样子：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572686439224.png)

此时如果要将钟表的时间改成 3 点整，那么需要如何调整钟表呢？有如下的两种方式：

* 方法一：将时针逆时针拨 3 个小时，如下图：

    ![](http://cnd.qiniu.lin07ux.cn/markdown/1572686540115.png)

    从数学角度来看这个操作，其实是一个求 6 个小时减去 3 个小时等于几的问题，可以使用如下的表达式来表示这个过程：
    
    ```
    6 - 3 = 3
    ```

* 方法二：将时针顺时针拨 9 个小时，如下图：

    ![](http://cnd.qiniu.lin07ux.cn/markdown/1572686573545.png)

    从数学角度来看这个操作，其实是一个求 6 小时加上 9 小时等于几的问题，可以使用如下的表达式来表示这个过程：
    
    ```
    6 + 9 = (0 + 6) + (6 + 3)
          = 0 + (6 + 6) + 3
          = 0 + 10 + 3 // 这里的 10 是十二进制数值，等于十进制中的 12
          = 13         // 这是的 13 也是十二进制数值，等于十进制中的 15
    ```

    也就是说，`6 个小时加上 9 个小时`相当于如下两种表达：
    
    * 将时针从 0 刻度先顺时针转 6 个刻度，再继续转 9 个刻度；
    * 将时针从 0 可刻度先顺时针转 12 (十二进制中的`10`)个刻度(也就是表盘的一圈)，然后再继续转 3 个刻度。

    这种方法虽然计算的结果是`13`(十二进制)，但是最终的时针是在数字 3 上了，也就是表示 3 点整，相当于忽略掉了计算结果中的进位。那么也就说，下面的式子在实际结果中是成立的(虽然看起来很奇怪)：
    
    ```
    6 + 9 = 3
    ```

在忽略进位的时候，十二进制中`6 + 9 = 6 - 3 = 3`，也就是说加法的结果和减法的结果是一样的了。3 和 9 的和正好是十二进制中的`10`(也就是十进制中的 12)，可以说在使用单个十二进制位表示数字时，3 和 9 互为补数。

在上面的例子中可以看到，减去一个数等于加上这个数的补数，然后再减去十二进制中的`10`(也就是十进制中的`12`)，得到的就是原减法的结果。减去十二进制中的`10`的操作其实就相当于直接把进位忽略掉。这个过程提供了一个计算减法的思路：**减法可以通过适当的方式转换为加法进行运算**。

## 二、十进制中的补数

上边只是以钟表为例提出了一个在使用单个十二进制位表示数字时的`补数`的概念，这远远不够，下边正式以十进制为例全面的介绍一下到底啥是个`补数`。

### 2.1 十进制中补数的定义

**在采用十进制进行计数的情况下，如果两个使用 n 个十进制位表示的数字之和为 10<sup>n</sup>，那么就称这两个数互为补数**。

比如：

* `1`和`9`都是使用 1 个十进制位表示的，它们的和是`10`(也就是 10<sup>1</sup>)，所以它们互为补数。
* `11`和`89`都是使用 2 个十进制位表示的，它们的和是 100(也就是 10<sup>2</sup>)，所以它们互为补数。
* `111`和`889`都是使用 3 个十进制位表示的，它们的和是 1000(也就是 10<sup>3</sup>)，所以它们互为补数。

这里容易因为对补数的定义未把握清楚而出现一些困惑。比如，3 位十进制数`999`的补数按照定义来说，应该是`1000 - 999 = 1`，所以`999`的补数就是`1`，但是`1`又和`9`互为补数，这不就冲突了吗？其实这里需要切记：在讨论一个数的补数时，一定要限定一下当前使用几个十进制位来表示数字。比如对于`999`，它是一个 3 位十进制数，所以它的补数也应该是三位十进制，也就是应该是`001`，这样就可以和`9`的补数`1`区分开了(虽然`001`和`1`在数量上没有区别)。

### 2.2 如何求一个数的补数

在限定了使用 n 个十进制位来表示数字之和，怎么求一个数的补数呢？最容易想到的方法就是使用 10<sup>n</sup> 减去这个数。

比如说，在限定了使用 3 个十进制位来表示数字之后，如果要求 145 的补数，那么就使用 1000(也就是 10<sup>3</sup>)来减去这个 145：

```
  1000
-  145
------
   855
```

这个过程需要用到借位，如果不想借位运算，那么可以使用下面的两个步骤来完成计算：

* 步骤一：使用`999`减去`145`：

    ```
      999
    - 145
    -----
      854
    ```
    
* 步骤二：将步骤一中的结果加`1`：

    ```
      854
    +   1
    -----
      855
    ```

通过这两个步骤成功避免了减法中的借位为题，很轻松的可以算出三位十进制数`145`的补数为`855`。其实这个过程的本质过程就是这样的：

```
1000 - 145 = 999 + 1 - 145
           = (999 - 145) + 1
           = 854 + 1
           = 855
```

一般地，在限定了使用 n 个十进制位来表示数字之和，可以通过下面的两个步骤来求一个数的补数：

1. 先计算由 n 个`9`组成的十进制数字(其实也就是 10<sup>1</sup> - 1)减去该数的结果(此过程必然不涉及借位)；
2. 再将前面计算得到的结果加 1。

### 2.3 利用补数将减法转换为加法

虽然现在知道了一个数的补数如何更快的计算出来，但是`补数`这个概念的引入有什么作用呢？其实就是为了前面提到的将减法转换为加法。

比如，在使用 1 个十进制位表示数字的时候，3 和 7 是互为补数的。此时如果想计算`6 - 3`的值，可以这样转换这个表达式：

```
6 - 3 = 6 - (10 - 7)
      = 6 + 7 - 10
      = 13 - 10
      = 3
```

其中的`- 10`部分是为了忽略掉进位。如果不考虑这部分，那么就可以将`6 - 3`这个减法运算转变成`6 + 7`的这个加法运算。也就说，**减法运算可以转换成被减数加上减数的补数的加法运算**。

所以，在做只使用 1 个十进制位表示的数字之间的减法操作时，减去一个数等于加上这个数的补数然后再减去 10，减去 10 的操作其实就相当于直接把和的进位忽略掉，得到的就是原减法的结果。将`6 - 3`转变成`6 + 7`之后，忽略掉进位就得到了`3`，如下图所示：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572690361712.png)

更一般地，假设`y`、`y'`是两个使用 n 个十进制位表示的数字，它们互为补数，那么有：

```
y + y' = 10^n
```

也就可以推出：

```
y = 10^n - y'
```

那么假设`x`也是使用 n 个十进制位表示的数字，那么有：

```
x - y = x - (10^n - y') = x + y' - 10^n
```

也就是说：**在做使用 n 个十进制位表示的数字之间的减法操作时，减去一个数等于加上这个数的补数然后再减去 10<sup>n</sup>，减去 10<sup>n</sup> 的操作其实就相当于直接把和的进位忽略掉，得到的就是原减法的结果**。

### 2.4 负数的表示

上边举的例子中的被减数都比减数大，如果被减数比减数小的时候会发生什么事情呢？依据初高中的数学知识，很显然运算结果将得到负数。

如果还沿用上述将减法转化成加法的方式去计算的话会发生什么？比方说假设`x`的值为 145，`y`的值是 215，想求`x - y`的差是多少？

1. 首先计算得到`215`的补数是`785`

2. 然后将被减数`145`和`785`相加：

    ```
      145
    + 785
    -----
      930
    ```

3. 再将结果减去 1000(也就是 10<sup>3</sup>)。

但是这里`930`比`1000`小，无法使用上述舍去进位的方式来求得最后的结果，要怎么处理呢？可以想到下边这些方式来解决这种被减数比减数小的情况：

* 方案一：人为的规定不允许出现被减数被减数小的情况。

    这种解决方案有点那种：“不解决问题，而是解决提出问题的人”的意思，过于硬核。

* 方案二：假设在做使用 n 个十进制位表示的数字追件的减法操作时，对于 x 为被减数，y 为减数，并且 x 小于 y 的情况下，可以变换一下前面的减法公式：

    ```
    x - y = x + y' - 10^n
          = -(10^n - (x + y'))
    ```
    
    这个公式中`10^n - (x + y')`部分就相当于求`(x + y')`的结果的补数。
    
    对于这里的示例来说，就是继续求`930`的补数，得到结果为`070`，然后将其变成负数，也就是`-70`，那么最终的结果就是`-70`。这个过程就像是脱了裤子放屁一样，纯属冗余浪费。既然使用补数去计算`145 - 215`的差不好计算，直接算`-(215 - 145)`不就好了吗？

    其实不论是取最终结果的补数还是在运算前就调换被减数和减数的位置，都在十进制中引入了一个新的符号：负号`-`，这个符号是独立于`1`、`2`、`3`、`4`、`5`、`6`、`7`、`8`、`9`这十个符号的新符号。对于人来说引入一个负号没什么问题，不过想让机器代替人们思考，最好不要让有负号这个东西，于是有了方案三。

* 方案三：在使用 n 个符号表示数字时，对于一个正数，直接用它的补数来表示与其绝对值相同的负数。

    在本例中，可以把`070`当做一个正数，而它的补数`930`当做一个负数(其实就相当于人们眼中的`-70`)，此话怎讲呢？且听稍后细细分解～

在一些同学眼里，`930`明明就是`930`，为啥要说它是`-70`呢？这其实是固有的观念在作怪，人们从小接受的教育就是只有数字前边带负号的才算是负数。现在需要先抛弃一下这种固有观念，由于不想引入负号`-`这个符号，所以只能想其他方式来表示负数。先看一下使用 3 个十进制位表示的数字在数轴上的分布：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572692805698.png)

可以以`500`为中心把这些数字分成两组(左边的那组`000`除外)，也就是`001～499`为一组，`501～999`为一组。散布在两个组里的数字以`500`为中心依次互为补数，如图所示：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572692850903.png)

这时候就可以**人为的规定**：

* `001 ~ 499`这一组的数字为正数；
* `501 ~ 999`这一组为负数，并且对于`001 ~ 499`这一组中任意一个正数`y`，直接用它的补数`y'`来表示与其表示与其绝对值相同的负数。
* `000`代表的就是`0`。

`501 ～ 999`这一组与人们固有观念中的负数的映射情况就如下图所示：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572693007851.png)

不过这上边还有一个事情没有处理，就是`500`在数轴上的位置比较尴尬，它左边的数代表非负数，它右边的数代表负数。而且`500`的补数还是`500`自己(`1000 - 500 = 500`)，那我们应该把`500`当作一个正数，还是应该把它当作一个负数(`-500`)呢？其实都可以，想让它是正数就是正数，想让它是负数就是负数(也就是取决于人为的规定)。不过常规上还是把它看作一个正数的补数，也就是把它当作`-500`看待。之所以采用这个规定，是因为想做一个方便的处理：可以依据某个数字的首个十进制位来判断它是正数还是负数，规则如下：

* 如果首个十进制位的字面量小于`5`，那么就把它当作一个非负数。
* 如果首个十进制位的字面量大于或等于`5`，那么就把它当做一个负数。

为了方便起见，可以把收个十进制位称为`符号位`。

引入了`符号位`的概念之后，需要修改一下上边的映射图：

![](http://cnd.qiniu.lin07ux.cn/markdown/1572706476805.png)

更一般的，当之后再看到使用 n 个十进制位表示的数字的时候，它代表的数值大小需要按照下边的规则去判断：

* 如果符号位的字面量小于`5`，那么就把它当作是一个非负数。
* 如果符号位的字面量大于或等于`5`，那么就把它当作是一个负数，它的绝对值和它对应的补数相同。 
好了，重新梳理一下说了半天到底说了个啥：其实可以把使用`n`个十进制位表示的数字看作是一堆十进制符号的组合，现在一共有 10 个十进制符号：`0`、`1`、`2`、`3`、`4`、`5`、`6`、`7`、`8`、`9`，那么三个十进制符号的组合就一共有`10×10×10=1000`种可能，其实也就是：`000~999`。每一种组合都可以映射到一个数值，不过可以有不同的映射方式：

* 最初介绍进制的时候认为由三个符号组成的组合来说，每个位置的符号表示的数值为该符号的字面量乘以一个 10 的整数次幂，整个组合表示的数值为所有位置的符号代表的值加起来的总和。这个过程中没有引入*负数*的概念，可以把通过这样的方式来解释数值的符号组合成为*无符号数*。对于由三个符号组合而成的*无符号数*来说，它真正代表的数值范围就是`0~999`这 1000 个数。

* 当引入*负数*的时候，把首个符号的字面量小于`5`的符号组合代表的数值和*无符号数*中的含义一样，但收个符号的字面量大于或等于`5`的符号组合当做一个负数，它的绝对值和它对应的补数值相同。把通过这样的方式来解释数值的符号组合称为*有符号数*。对于由三个符号组合而成的*有符号数*来说，它真正代表的数值范围也就是`-500~499`这 1000 个数。

也就说，对于同一组符号组合，把它解释称有符号数和无符号数的时候，它所代表的的数值可能相同也可能不同。比方说对于三个符号的组合`215`，它的首个符号的字面量是`2`，小于`5`，把它解释成无符号数和有符号数的数值大小都一样。不过对于三个符号的组合`930`，它的首个符号的字面量是`9`，大于`5`，把它解释成无符号数的数值就是正数`930`，而把它解释成有符号数的话就代表数值`-70`。至于什么时候把一组符号组合解释成无符号数，什么时候解释成有符号数，取决于自己～

### 2.5 扩展表示数字的十进制位个数

在采用十进制进行计数的情况下，当表示数字时使用的十进制位个数不同时，能表示的数值范围也就不同，比方说：

1. 如果使用 1 个十进制位表示数字(也就是`0~9`)： 
    * 能表示的无符号数的数值范围就是`0~9`。
    * 能表示的有符号数的数值范围就是`-5~4`。 
2. 如果使用 2 个十进制位表示数字(也就是`00~99`)： 
    * 能表示的无符号数的数值范围就是`00~99`。
    * 能表示的有符号数的数值范围就是`-50~49`。 
3. 如果使用 3 个十进制位表示数字(也就是`000~999`)： 
    * 能表示的无符号数的数值范围就是`000~999`。
    * 能表示的有符号数的数值范围就是`-500~499`。 
4. 如果使用 4 个十进制位表示数字(也就是`0000~9999`)： 
    * 能表示的无符号数的数值范围就是`0000~9999`。
    * 能表示的有符号数的数值范围就是`-5000~4999`。 
5. 等等等等～ 
很显然，使用越少的十进制位来表示数字时，能表示的数值范围就越小；使用越多的十进制位来表示数字时，能表示的数值范围就越大。在使用较多的十进制位来表示某个数值时，可能无法使用更少的十进制位来表示这个数值；相反的话，在使用较少的十进制位来表示某个数值时，那么一定能使用更多的十进制位来表示这个数值。

如果想将使用较少的十进制位表示的无符号数扩展成使用更多十进制位表示的无符号数，只需要在开头补更多的`0`，比方说使用三个十进制位表示的无符号数`501`，如果想：

* 把它扩展成使用 4 个十进制位表示的无符号数，简单地在开头补 1 个`0`就好，变成这样：`0501`。
* 把它扩展成使用 5 个十进制位表示的无符号数，简单地在开头补 2 个`0`就好，变成这样：`00501`。
* 把它扩展成使用 6 个十进制位表示的无符号数，简单地在开头补 3 个`0`就好，变成这样：`000501`。
* 把它扩展成使用 n(n > 3) 个十进制位表示的无符号数，简单地在开头补 n-3 个`0`就好。 
可以把这种扩展方式称之为零扩展，在原无符号数开头简单地补`0`，并不会改变它代表数值的大小。

不过在扩展表示有符号数的十进制位个数的时候就不能简单的使用零扩展了，比方说对于使用 3 个十进制位表示的有符号数`501`，它的符号位为`5`，说明它代表的是一个负数，代表的数值其实是`-499`。如果想使用 4 个十进制位表示这个有符号数，要是直接在开头补0的话就变成了`0501`，扩展后的有符号数的数值变为了正数`501`，这可不是所期望的。其实求使用 3 个十进制位表示的有符号数`501`扩展到使用 4 个十进制位表示的有符号数是什么的本质就是求在使用 4 个十进制位表示数字时，`0499`的补数是什么。求一个十进制数的补数还不简单么？求解过程分两步：
	
1. 步骤一：使用`9999`减去`0499`，得到`9500`。
2. 步骤二：将步骤一中的结果`9500`加`1`，得到`0499`的补数其实就是`9501`。 
也就是说使用 4 个十进制位表示数值为`-499`的有符号数就是`9501`，而使用 3 个十进制位表示数值为`-499`的有符号数是`501`。`9501`和`501`的区别是个啥？就是在`501`前边补了个`9`就好了嘛～

可以换一种角度来看这个问题，`499`和`501`的和本来已经是`1000`了，现在要求`0499`在使用 4 个十进制位表示的补数是多少，只要在`1000`的基础上再加`9000`就好了嘛，所以我们直接在`501`前边补一个`9`，变成`9501`就是扩展后的有符号数。

那如果现在想把`501`扩展为使用 5 个十进制位表示的有符号数咋办呢？当然是在前边补 2 个`9`了。依次类推，如果现在想把`501`扩展为使用 n(n>3) 个十进制位表示的有符号数咋办呢？当然是在前边补 n-3 个`9`了。

总结一下：扩展表示有符号数的十进制位个数的时候，在该有符号数的符号位的字面量小于`5`的时候，可以采用直接在原数前边补`0`的方式扩展；在该有符号数的符号位的字面量大于或等于`5`的时候，可以采用直接在原数前边补`9`的方式扩展。把这种扩展时依赖符号位的值的扩展方式称之为**符号扩展**。

## 三、总结

到此为止。关于十进制中的补数就说的差不多了。这些关于十进制中的补数的概念，都是为二进制补数做铺垫。理解了十进制的补数和相关概念，在变为二进制的时候，也能同样的理解其原因和原理了。

